import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Documentation/Contributing" />

# Contributing

WiKit was designed in mind with enabling different roles (dev, UX, PM etc.) to contribute to it.

## Working with GitHub

WiKit lives on GitHub. Anyone within the wmde GitHub org should be able to contribute to the repository.
If you don't have write access, please reach out to a manager.

### Checks

All checks configured to run on each branch need to pass in order for the PR to be merged (the merge button will be inactive).

 - **Test and Deploy** - runs unit tests and linters, builds Storybook, deploys to [Chromatic](https://www.chromatic.com/builds?appId=5efdb3b5f65950002286285d&branch=master) and runs cross browser tests.
 - **Storybook Publish** - leads to the Storybook built on this branch and deployed to Chromatic.
 - **UI Tests** - leads to the Visual Tests feature on Chromatic which reports if there were any visual changes between master and the respective branch.
 
<center>
    <img src="./images/docs_github_checks.png" alt="Checks performed on each GitHub PR" />
</center>

### Peer Reviews

At least one person (different than the author of the PR) has to approve the PR in order for the merge button to become active.
This is true regardless of the type of change - tokens, docs or vue-components.

### Merging to master

The master branch is the single source of truth for all three parts of the Design System - tokens, docs and vue-components.  
Nevertheless, when you are developing a new feature, you can safely merge to master, because the Design System does not get released automatically on push to master.
A release happens after a developer takes several intentional actions.  
You can read more about releases in the section [Releasing a new component](?path=/story/documentation-how-to-create-reusable-components-developing-components--page#releasing-a-new-component).

## Services

Development uses several external services to achieve better workflow and code coverage.

### Chromatic

[Chromatic](https://www.chromatic.com/) is a tool that automates testing components in Storybook.  
The vue-components Storybook is build on each branch and deployed to Chromatic.
It is then tested for visual regressions. 
Both links to the UI tests and the published Storybook are available in each PR's checks (at the bottom).  
To access WiKit's Chromatic space [click here](https://www.chromatic.com/library?appId=5efdb3b5f65950002286285d) and login with your GitHub account. If you're part of the wmde github org, you will have access immediately.


### Saucelabs

[Saucelabs](https://saucelabs.com/) is a continuous testing cloud.  
The cross-browser tests for `vue-components` are running on Saucelabs's servers, testing the components on Firefox, Chrome, Edge and IE11. The cross-browser tests run against the storybook that is published to Netlify with every update to a branch.
To access the test results and artifacts (snapshots, videos) in Saucelabs's UI, you need an account. If you don't have one, please contact a manager.  
The test results can also be seen in CI, in the [Test-and-deploy](https://github.com/wmde/wikit/actions?query=workflow%3A%22Test+and+deploy%22) GitHub action.

### Netlify
We use [Netlify](https://www.netlify.com/) for branch previews of the composed (docs + tokens + components) storybook which gets built and published on every update to a remote branch. It's also targeted by the Saucelabs browser tests.
